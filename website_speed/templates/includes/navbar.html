<!-- Start Navbar -->
{% if current_lang == 'ar' %}
<section id="header" class="position-fixed w-100 top-0 right-0">
{% else %}
<section id="header" class="position-fixed w-100 top-0 left-0">
{% endif %}
<!-- <section id="header" class="position-fixed w-100 top-0 left-0"> -->
    <div class="header pt-2">
        <div class="container-fluid">
            <div class="nav-bar d-flex align-items-center justify-content-between">
                <!-- Logo -->
                <div class="brand image-animate">
                    <a href="/index">
                        <img src="/assets/website_speed/speed_assets/uploads/settings/logo3.png" alt="Logo">
                    </a>
                </div>

                <!-- Navigation List -->
                <div class="nav-list">
                    <div class="hamburger">
                        <div class="bar"></div>
                    </div>
                    <ul class="mb-0">
                        <li>
                            <a href="/index">
                                {{ i18n['home'][current_lang] }}
                            </a>
                        </li>
                        <li>
                            <a href="../pages/about-us" data-after="About">
                                {{ i18n['about_us'][current_lang] }}
                            </a>
                        </li>
                        <li>
                            <a href="../pages/shipping_rates" data-after="Shipping Rates">
                                {{ i18n['shipping_rates'][current_lang] }}
                            </a>
                        </li>
                        <li>
                            <a href="../pages/calculator" data-after="Calculator">
                                {{ i18n['calculator'][current_lang] }}
                            </a>
                        </li>
                        <li>
                            <a href="../pages/contact-us" data-after="Contact">
                                {{ i18n['contact'][current_lang] }}
                            </a>
                        </li>
                        <li>
                            <a href="../pages/help" data-after="help">
                                {{ i18n['help'][current_lang] }}
                            </a>
                        </li>
                        <li class="acount align-items-center justify-content-between">
                            <a href="../login" class="border py-3 px-3 mx-2 rounded-2 d-inline-block fs-4 text-white">
                                {{ i18n['login'][current_lang] }}
                            </a>
                        </li>
                        <li>
                            {% set current_lang = frappe.request.cookies.get('preferred_lang', 'ar') %}
                            <a href="javascript:void(0);" id="lang-toggle" data-lang="{{ 'en' if current_lang == 'ar' else 'ar' }}">
                                {{ 'English' if current_lang == 'ar' else 'العربية' }}
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- End Navbar -->

<!-- Language Switch Script -->
<script>
    document.getElementById('lang-toggle')?.addEventListener('click', function () {
        const lang = this.getAttribute('data-lang');
        const currentUrl = window.location.pathname + window.location.search;

        fetch(`/set_language?lang=${lang}&redirect_to=${currentUrl}`, {
            method: 'GET',
            credentials: 'same-origin'
        }).then(() => {
            window.location.reload();
        }).catch((err) => {
            console.error("Language switch failed", err);
            alert("حدث خطأ أثناء تغيير اللغة.");
        });
    });
</script>
